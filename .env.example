# =============================================================================
# Vivian Backend - Environment Configuration
# =============================================================================
# Single source of truth for all environment variables.
# Copy this file to .env and fill in your actual values.
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your values
#   docker compose up
# =============================================================================

# -----------------------------------------------------------------------------
# OpenRouter (required for receipt parsing and chat)
# -----------------------------------------------------------------------------
VIVIAN_API_OPENROUTER_API_KEY=your_openrouter_api_key_here
VIVIAN_API_OPENROUTER_MODEL=google/gemini-3-flash-preview

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
VIVIAN_API_HOST=0.0.0.0
VIVIAN_API_PORT=8000

# -----------------------------------------------------------------------------
# Auth
# -----------------------------------------------------------------------------
VIVIAN_API_AUTH_JWT_SECRET=change-this-in-production
VIVIAN_API_AUTH_JWT_ALGORITHM=HS256
VIVIAN_API_AUTH_ACCESS_TOKEN_MINUTES=15
VIVIAN_API_AUTH_REFRESH_TOKEN_DAYS=30

# -----------------------------------------------------------------------------
# Encryption (required for storing Google OAuth tokens in the database)
# Generate with: openssl rand -base64 32
# -----------------------------------------------------------------------------
VIVIAN_API_ENCRYPTION_KEY=generate-me-with-openssl-rand-base64-32

# -----------------------------------------------------------------------------
# Database (overridden by docker-compose for containerized postgres)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/vivian

# -----------------------------------------------------------------------------
# Temp storage
# -----------------------------------------------------------------------------
VIVIAN_API_TEMP_UPLOAD_DIR=/tmp/vivian-uploads

# -----------------------------------------------------------------------------
# Confidence threshold for human review (0.0 - 1.0)
# -----------------------------------------------------------------------------
VIVIAN_API_CONFIDENCE_THRESHOLD=0.85

# -----------------------------------------------------------------------------
# CORS origins (JSON array format)
# -----------------------------------------------------------------------------
VIVIAN_API_CORS_ORIGINS=["http://localhost:3000", "http://client:3000"]

# -----------------------------------------------------------------------------
# Google OAuth (required for Google Drive/Sheets integrations)
# Create in Google Auth Platform > OAuth client > Web application
# Authorized redirect URI: http://localhost:8000/api/v1/integrations/google/oauth/callback
# -----------------------------------------------------------------------------
VIVIAN_API_GOOGLE_CLIENT_ID=your_google_oauth_client_id.apps.googleusercontent.com
VIVIAN_API_GOOGLE_CLIENT_SECRET=your_google_oauth_client_secret
VIVIAN_API_GOOGLE_OAUTH_REDIRECT_URI=http://localhost:8000/api/v1/integrations/google/oauth/callback
VIVIAN_API_GOOGLE_OAUTH_TOKEN_STORE_PATH=/tmp/vivian-uploads/google-oauth.json

# -----------------------------------------------------------------------------
# Ollama (optional, for local LLM models)
# When running in Docker, host.docker.internal resolves to host machine
# -----------------------------------------------------------------------------
OLLAMA_BASE_URL=http://host.docker.internal:11434

# -----------------------------------------------------------------------------
# MCP servers
# Per-server settings (folder IDs, spreadsheet IDs) are managed via the
# Settings UI and stored in the database. No env vars needed for those.
# -----------------------------------------------------------------------------
VIVIAN_API_MCP_SERVERS_ROOT_PATH=/mcp-servers
VIVIAN_API_MCP_DEFAULT_ENABLED_SERVERS=

# -----------------------------------------------------------------------------
# Optional: location context for chat system prompt
# -----------------------------------------------------------------------------
VIVIAN_API_USER_LOCATION=
